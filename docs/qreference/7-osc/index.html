<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>7 osc - Faust Documentation</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="/css/quickref.css" rel="stylesheet">
        <link href="/rail/railroad-diagrams.css" rel="stylesheet">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../.."><img src="../../img/faustText.svg" width="150px"> </a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Manual <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../manual/introduction/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../manual/overview/" class="dropdown-item">Overview of the Faust Universe</a>
</li>
                                    
<li>
    <a href="../../manual/quick-start/" class="dropdown-item">Quick start</a>
</li>
                                    
<li>
    <a href="../../manual/syntax/" class="dropdown-item">Faust Syntax</a>
</li>
                                    
<li>
    <a href="../../manual/compiler/" class="dropdown-item">Using the Compiler</a>
</li>
                                    
<li>
    <a href="../../manual/options/" class="dropdown-item">Compiler Options</a>
</li>
                                    
<li>
    <a href="../../manual/tools/" class="dropdown-item">faust2[...] Tools</a>
</li>
                                    
<li>
    <a href="../../manual/architectures/" class="dropdown-item">Architecture Files</a>
</li>
                                    
<li>
    <a href="../../manual/embedding/" class="dropdown-item">Embedding the Compiler</a>
</li>
                                    
<li>
    <a href="../../manual/optimizing/" class="dropdown-item">Optimizing the Code</a>
</li>
                                    
<li>
    <a href="../../manual/debugging/" class="dropdown-item">Debugging the Code</a>
</li>
                                    
<li>
    <a href="../../manual/deploying/" class="dropdown-item">Deploying on the Web</a>
</li>
                                    
<li>
    <a href="../../manual/remote/" class="dropdown-item">Remote compilation</a>
</li>
                                    
<li>
    <a href="../../manual/mathdoc/" class="dropdown-item">Mathematical Documentation</a>
</li>
                                    
<li>
    <a href="../../manual/osc/" class="dropdown-item">OSC Support</a>
</li>
                                    
<li>
    <a href="../../manual/http/" class="dropdown-item">HTTP Support</a>
</li>
                                    
<li>
    <a href="../../manual/midi/" class="dropdown-item">MIDI Support</a>
</li>
                                    
<li>
    <a href="../../manual/soundfiles/" class="dropdown-item">Soundfiles Support</a>
</li>
                                    
<li>
    <a href="../../manual/community/" class="dropdown-item">Community</a>
</li>
                                    
<li>
    <a href="../../manual/faq/" class="dropdown-item">Frequently Asked Questions</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../examples/ambisonics/" class="dropdown-item"> ambisonics </a>
</li>
                                    
<li>
    <a href="../../examples/analysis/" class="dropdown-item"> analysis </a>
</li>
                                    
<li>
    <a href="../../examples/bela/" class="dropdown-item"> bela </a>
</li>
                                    
<li>
    <a href="../../examples/delayEcho/" class="dropdown-item"> delayEcho </a>
</li>
                                    
<li>
    <a href="../../examples/dynamic/" class="dropdown-item"> dynamic </a>
</li>
                                    
<li>
    <a href="../../examples/filtering/" class="dropdown-item"> filtering </a>
</li>
                                    
<li>
    <a href="../../examples/gameaudio/" class="dropdown-item"> gameaudio </a>
</li>
                                    
<li>
    <a href="../../examples/generator/" class="dropdown-item"> generator </a>
</li>
                                    
<li>
    <a href="../../examples/misc/" class="dropdown-item"> misc </a>
</li>
                                    
<li>
    <a href="../../examples/phasing/" class="dropdown-item"> phasing </a>
</li>
                                    
<li>
    <a href="../../examples/physicalModeling/" class="dropdown-item"> physicalModeling </a>
</li>
                                    
<li>
    <a href="../../examples/pitchShifting/" class="dropdown-item"> pitchShifting </a>
</li>
                                    
<li>
    <a href="../../examples/psychoacoustic/" class="dropdown-item"> psychoacoustic </a>
</li>
                                    
<li>
    <a href="../../examples/reverb/" class="dropdown-item"> reverb </a>
</li>
                                    
<li>
    <a href="../../examples/SAM/" class="dropdown-item"> SAM </a>
</li>
                                    
<li>
    <a href="../../examples/smartKeyboard/" class="dropdown-item"> smartKeyboard </a>
</li>
                                    
<li>
    <a href="../../examples/spat/" class="dropdown-item"> spat </a>
</li>
                                    
<li>
    <a href="../../rsrc/examples.zip" class="dropdown-item"> Download examples </a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../workshops/2020-04-10-faust-juce/" class="dropdown-item">Faust & JUCE</a>
</li>
                                    
<li>
    <a href="../../tutorials/teensy/" class="dropdown-item">DSP on the Teensy With Faust</a>
</li>
                                    
<li>
    <a href="../../tutorials/esp32/" class="dropdown-item">DSP on the ESP-32 With Faust</a>
</li>
                                    
<li>
    <a href="../../tutorials/basic-osc/" class="dropdown-item">Making a Sine Oscillator From Scratch</a>
</li>
                                    
<li>
    <a href="../../tutorials/summation/" class="dropdown-item">RMS and Summation in Faust</a>
</li>
                                    
<li>
    <a href="../../tutorials/julia/" class="dropdown-item">Using Faust in Julia</a>
</li>
                                    
<li>
    <a href="../../tutorials/box-api/" class="dropdown-item">Using the box API</a>
</li>
                                    
<li>
    <a href="../../tutorials/signal-api/" class="dropdown-item">Using the signal API</a>
</li>
                                    
<li>
    <a href="../../tutorials/cmajor/" class="dropdown-item">Using Faust in Cmajor</a>
</li>
                                    
<li>
    <a href="../../tutorials/debugging/" class="dropdown-item">Advanced debugging with interp-tracer</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Workshops <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../workshops/2018-12-01-paw/" class="dropdown-item"> 2018-12-01 PAW </a>
</li>
                                    
<li>
    <a href="../../workshops/2020-03-24-faust-citi/" class="dropdown-item"> 2020-03-24 CITI </a>
</li>
                                    
<li>
    <a href="../../workshops/2020-04-10-faust-101/" class="dropdown-item"> 2020-04-10 Faust 101 </a>
</li>
                                    
<li>
    <a href="../../workshops/2020-04-10-faust-juce/" class="dropdown-item"> 2020-04-10 Faust & JUCE </a>
</li>
                                    
<li>
    <a href="../../workshops/2020-11-21-faust-vcvrack/" class="dropdown-item"> 2020-11-21 Faust & VCV Rack </a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        

        <div class="container">
            <div class="row"><div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#osc-support" class="nav-link">OSC support</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#a-simple-example" class="nav-link">A simple example</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#automatic-port-allocation" class="nav-link">Automatic port allocation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#discovering-osc-applications" class="nav-link">Discovering OSC applications</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#discovering-the-osc-interface-of-an-application" class="nav-link">Discovering the OSC interface of an application</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#widgets-osc-address" class="nav-link">Widget's OSC address</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#controlling-the-application-via-osc" class="nav-link">Controlling the application via OSC</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#turning-transmission-on" class="nav-link">Turning transmission ON</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#filtering-osc-messages" class="nav-link">Filtering OSC messages</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#using-osc-aliases" class="nav-link">Using OSC aliases</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#osc-cheat-sheet" class="nav-link">OSC cheat sheet</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#default-ports" class="nav-link">Default ports</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#command-line-options" class="nav-link">Command line options</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#discovery-messages" class="nav-link">Discovery messages</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#control-messages" class="nav-link">Control messages</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#alias" class="nav-link">Alias</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#dsp-with-polyphonic-support" class="nav-link">DSP with polyphonic support</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9 main-container" role="main">

<script src='/rail/railroad-diagrams.js'></script>

<h1 id="osc-support">OSC support</h1>
<p><a name="osc"></a></p>
<p>Most <span class="smallcaps">Faust</span> architectures provide Open Sound Control (OSC) support \footnote{The implementation is based internally on the <strong>oscpack</strong> library by Ross Bencina}. This allows <span class="smallcaps">Faust</span> applications to be remotely controlled from any OSC capable application, programming language, or hardware device. OSC support can be activated using the 
<span class="lstinline">-osc</span> option when building the application with the appropriate <span class="lstinline">faust2xxx</span> command. The following table (table <a href="../7-osc#tab:oscarch">tab:oscarch</a>) lists <span class="smallcaps">Faust</span>'s architectures which provide OSC support. </p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="right"><strong>Audio system</strong></td>
<td align="center"><strong>Environment</strong></td>
<td align="center"><strong>OSC support</strong></td>
</tr>
<tr>
<td align="right"><strong>Linux</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="right">Alsa</td>
<td align="center">GTK, Qt, Console</td>
<td align="center">yes</td>
</tr>
<tr>
<td align="right">Jack</td>
<td align="center">GTK, Qt, Console</td>
<td align="center">yes</td>
</tr>
<tr>
<td align="right">Netjack</td>
<td align="center">GTK, Qt, Console</td>
<td align="center">yes</td>
</tr>
<tr>
<td align="right">PortAudio</td>
<td align="center">GTK, Qt</td>
<td align="center">yes</td>
</tr>
<tr>
<td align="right"><strong>Mac OS X</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="right">CoreAudio</td>
<td align="center">Qt</td>
<td align="center">yes</td>
</tr>
<tr>
<td align="right">Jack</td>
<td align="center">Qt, Console</td>
<td align="center">yes</td>
</tr>
<tr>
<td align="right">Netjack</td>
<td align="center">Qt, Console</td>
<td align="center">yes</td>
</tr>
<tr>
<td align="right">PortAudio</td>
<td align="center">Qt</td>
<td align="center">yes</td>
</tr>
<tr>
<td align="right"><strong>Windows</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="right">Jack</td>
<td align="center">Qt, Console</td>
<td align="center">yes</td>
</tr>
<tr>
<td align="right">PortAudio</td>
<td align="center">Qt</td>
<td align="center">yes</td>
</tr>
<tr>
<td align="right"><a name="tab:oscarch"></a></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p><span class='caption'><span class="smallcaps">Faust</span> architectures with OSC support.</span></p>
<h2 id="a-simple-example">A simple example</h2>
<p>To illustrate how OSC support works let's define a very simple noise generator with a level control: <span class="lstinline">noise.dsp</span></p>
<pre><code>    process = library(&quot;music.lib&quot;).noise 
            * hslider(&quot;level&quot;, 0, 0, 1, 0.01);
</code></pre>
<p>We are going to compile this example as a standalone Jack QT application with OSC support using the command:</p>
<pre><code>    faust2jaqt -osc noise.dsp
</code></pre>
<p>When we start the application from the command line:</p>
<pre><code>    ./noise 
</code></pre>
<p>we get various information on the standard output, including:</p>
<pre><code>    Faust OSC version 0.93 application 'noise' is running on UDP ports 5510, 5511, 5512
</code></pre>
<p>As we can see the OSC module makes use of three different UDP ports:</p>
<ul>
<li><span class="lstinline">5510</span> is the listening port number: control messages should be addressed to this port.</li>
<li><span class="lstinline">5511</span> is the output port number: control messages sent by the application and answers to query messages are sent to this port.</li>
<li><span class="lstinline">5512</span> is the error port number: used for asynchronous error notifications.</li>
</ul>
<p>Note that if a <span class="lstinline"> declare name \"Foo\"; </span> line is present in the DSP program, <span class="lstinline">Foo</span> will be used as the OSC root name, otherwise the DSP filename will be used instead.</p>
<p>These OSC parameters can be changed from the command line using one of the following options:</p>
<ul>
<li><span class="lstinline">-port number</span> set the port number used by the application to receive messages.</li>
<li><span class="lstinline">-outport number</span> set the port number used by the application to transmit messages.</li>
<li><span class="lstinline">-errport number</span> set the port number used by the application to transmit error messages.</li>
<li><span class="lstinline">-desthost host</span> set the destination host for the messages sent by the application. Note that the destination address can be changed with the first incoming message: first received packet from another host sets the destination address to this host.</li>
<li><span class="lstinline">-xmit 0|1|2</span> turn transmission OFF, ALL, or ALIAS (default OFF). When transmission is OFF, input elements can be controlled using their addresses or aliases (if present). When transmission is ALL, input elements can be controlled using their addresses or aliases (if present), user's actions and output elements (bargraph) are transmitted as OSC messages as well as aliases (if present). When transmission is ALIAS,  input elements can only be controlled using their aliases, user's actions and output elements (bargraph) are transmitted as aliases only.</li>
<li><span class="lstinline">-xmitfilter path</span> allows to filter output messages. Note that 'path' can be a regular expression (like "/freeverb/Reverb1/*").</li>
</ul>
<p>For example:</p>
<pre><code>    ./noise -xmit 1 -desthost 192.168.1.104 -outport 6000
</code></pre>
<p>will run noise with transmission mode ON, using 192.168.1.104 on port 6000 as destination.</p>
<h2 id="automatic-port-allocation">Automatic port allocation</h2>
<p>In order to address each application individually, only one application can be listening on a single port at one time. Therefore when the default incoming port 5510 is already opened by some other application, an application will automatically try increasing port numbers until it finds an available port. Let's say that we start two applications <span class="lstinline">noise</span> and <span class="lstinline">mixer</span> on the same machine, here is what we get:</p>
<pre><code>    $ ./noise &amp;
    ...
    Faust OSC version 0.93 application 'noise' is running on UDP ports 5510, 5511, 5512
    $ ./mixer
    ...
    Faust OSC version 0.93 application 'mixer' is running on UDP ports 5513, 5511, 5512
</code></pre>
<p>The <span class="lstinline">mixer</span> application fails to open the default incoming port 5510 because it is already opened by <span class="lstinline">noise</span>. Therefore it tries to find an available port starting from 5513 and open it. Please note that the two outcoming ports 5511 and 5512 are shared by all running applications.</p>
<h2 id="discovering-osc-applications">Discovering OSC applications</h2>
<p>The commands <span class="lstinline">oscsend</span><div class="marginpar"><span class="lstinline">oscsend</span> <strong>hostname</strong> <strong>port</strong> <strong>address</strong> <strong>types</strong> <strong>values</strong>: send OpenSound Control message via UDP. <strong>types</strong> is a string, the letters indicates the type of the following values: i=integer, f=float, s=string,...
</div>
Send OpenSound Control message via UDP. and <span class="lstinline">oscdump</span><div class="marginpar"><span class="lstinline">oscdump</span> <strong>port</strong> : receive OpenSound Control messages via UDP and dump to standard output
</div> from the liblo package provide a convenient mean to experiment with OSC control. For the experiment let's use two additional terminals. The first one will be used to send OSC messages to the noise application using <span class="lstinline">oscsend</span>. The second terminal will be used to monitor the messages sent by the application using <span class="lstinline">oscdump</span>. We will indicate by <span class="lstinline">T1$</span> the command types on terminal T1 and by <span class="lstinline">T2:</span> the messages received on terminal T2. To monitor on terminal T2 the OSC messages received on UDP port 5511 we will use <span class="lstinline">oscdump</span>:</p>
<pre><code>    T2$ oscdump 5511
</code></pre>
<p>Once set we can use the <span class="lstinline">hello</span> message  to scan UDP ports for FAUST applications. For example:</p>
<pre><code>    T1$ oscsend localhost 5510 &quot;/*&quot; s hello
</code></pre>
<p>gives us the root message address, the network and the UDP ports used by the noise application:</p>
<pre><code>    T2: /noise siii &quot;192.168.1.102&quot; 5510 5511 5512
</code></pre>
<h2 id="discovering-the-osc-interface-of-an-application">Discovering the OSC interface of an application</h2>
<p>Once we have an application we can discover its OSC interface (the set of OSC messages we can use to control it) by sending the <span class="lstinline">get</span> message to the root:</p>
<pre><code>    T1$ oscsend localhost 5510 /noise s get 
</code></pre>
<p>As an answer of the osc messages  understood by the application, a full description is available on terminal T2:</p>
<pre><code>    T2: /noise sF &quot;xmit&quot; #F
    T2: /noise ss &quot;desthost&quot; &quot;127.0.0.1&quot;
    T2: /noise si &quot;outport&quot; 5511
    T2: /noise si &quot;errport&quot; 5512
    T2: /noise/level fff 0.000000 0.000000 1.000000
</code></pre>
<p>The root of the osc interface is <span class="lstinline">/noise</span>. Transmission is OFF, <span class="lstinline">xmit</span> is set to false. The destination host for sending messages is <span class="lstinline">"127.0.0.1"</span>, the output port is <span class="lstinline">5511</span> and the error port is <span class="lstinline">5512</span>. The application has only one user interface element: <span class="lstinline">/noise/level</span> with current value <span class="lstinline">0.0</span>, minimal value <span class="lstinline">0.0</span> and maximal value <span class="lstinline">1.0</span>.</p>
<h2 id="widgets-osc-address">Widget's OSC address</h2>
<p>Each widget of an application has a unique OSC address obtained by concatenating the labels of it's surrounding groups with its own label. </p>
<div class="marginpar"> There are potential conflicts between widget's labels and the OSC address space. An OSC symbolic name is an ASCII string consisting of a restricted set of printable characters. Therefore to ensure compatibility spaces are replaced by underscores and some other characters (asterisk, comma, forward, question mark, open bracket, close bracket, open curly brace, close curly brace) are replaced by hyphens.
</div>
<p>Here is as an example <span class="lstinline">mix4.dsp</span>, a very simplified monophonic audio mixer with 4 inputs and one output. For each input we have a mute button and a level slider:</p>
<pre><code>    input(v) = vgroup(&quot;input %v&quot;, *(1-checkbox(&quot;mute&quot;)) : *(vslider(&quot;level&quot;, 0, 0, 1, 0.01)));
    process = hgroup(&quot;mixer&quot;, par(i, 4, input(i)) :&gt; _);
</code></pre>
<p>If we query this application:</p>
<pre><code>    T1$ oscsend localhost 5510 &quot;/*&quot; s get 
</code></pre>
<p>We get a full description of its OSC interface on terminal T2:</p>
<pre><code>    T2: /mixer sF &quot;xmit&quot; #F
    T2: /mixer ss &quot;desthost&quot; &quot;127.0.0.1&quot;
    T2: /mixer si &quot;outport&quot; 5511
    T2: /mixer si &quot;errport&quot; 5512
    T2: /mixer/input_0/level fff 0.0000 0.0000 1.0000
    T2: /mixer/input_0/mute  fff 0.0000 0.0000 1.0000
    T2: /mixer/input_1/level fff 0.0000 0.0000 1.0000
    T2: /mixer/input_1/mute  fff 0.0000 0.0000 1.0000
    T2: /mixer/input_2/level fff 0.0000 0.0000 1.0000
    T2: /mixer/input_2/mute  fff 0.0000 0.0000 1.0000
    T2: /mixer/input_3/level fff 0.0000 0.0000 1.0000
    T2: /mixer/input_3/mute  fff 0.0000 0.0000 1.0000
</code></pre>
<p>As we can see each widget has a unique OSC address obtained by concatenating the top level group label "mixer", with the "input" group label and the widget label. Please note that in this operation whites spaces are replaced by underscores and metadata are removed. </p>
<p>All addresses must have a common root. This is the case in our example because there is a unique horizontal group "mixer" containing all widgets. If a common root is missing as in the following code:</p>
<pre><code>    input(v) = vgroup(&quot;input %v&quot;, *(1-checkbox(&quot;mute&quot;)) : *(vslider(&quot;level&quot;, 0, 0, 1, 0.01)));
    process = par(i, 4, input(i)) :&gt; _;
</code></pre>
<p>then a default vertical group is automatically create by the <span class="smallcaps">Faust</span> compiler using the name of the file <span class="lstinline">mix4</span> as label:</p>
<pre><code>    T2: /mix4 sF &quot;xmit&quot; #F
    T2: /mix4 ss &quot;desthost&quot; &quot;127.0.0.1&quot;
    T2: /mix4 si &quot;outport&quot; 5511
    T2: /mix4 si &quot;errport&quot; 5512
    T2: /mix4/input_0/level fff 0.0000 0.0000 1.0000
    T2: /mix4/input_0/mute  fff 0.0000 0.0000 1.0000
    T2: /mix4/input_1/level fff 0.0000 0.0000 1.0000
    T2: /mix4/input_1/mute  fff 0.0000 0.0000 1.0000
    T2: /mix4/input_2/level fff 0.0000 0.0000 1.0000
    T2: /mix4/input_2/mute  fff 0.0000 0.0000 1.0000
    T2: /mix4/input_3/level fff 0.0000 0.0000 1.0000
    T2: /mix4/input_3/mute  fff 0.0000 0.0000 1.0000
</code></pre>
<h2 id="controlling-the-application-via-osc">Controlling the application via OSC</h2>
<p>We can control any user interface element of the application by sending one of the previously discovered messages. For example to set the noise level of the application to <span class="lstinline">0.2</span> we send:</p>
<pre><code>    T1$ oscsend localhost 5510 /noise/level f 0.2
</code></pre>
<p>If we now query <span class="lstinline">/noise/level</span> we get, as expected, the value <span class="lstinline">0.2</span>:</p>
<pre><code>    T1$ oscsend localhost 5510 /noise/level s get
    T2: /noise/level fff 0.2000 0.0000 1.0000
</code></pre>
<h2 id="turning-transmission-on">Turning transmission ON</h2>
<p>The xmit message at the root level is used to control the realtime transmission of OSC messages corresponding to user interface's actions. For examples:</p>
<pre><code>    T1$ oscsend localhost 5510 /noise si xmit 1
</code></pre>
<p>turns transmission in ALL mode. Now if we move the level slider we get a bunch of messages:</p>
<pre><code>    T2: /noise/level f 0.024000
    T2: /noise/level f 0.032000
    T2: /noise/level f 0.105000
    T2: /noise/level f 0.250000
    T2: /noise/level f 0.258000
    T2: /noise/level f 0.185000
    T2: /noise/level f 0.145000
    T2: /noise/level f 0.121000
    T2: /noise/level f 0.105000
    T2: /noise/level f 0.008000
    T2: /noise/level f 0.000000
</code></pre>
<p>This feature can be typically used for automation to record and replay actions on the user interface, or to remote control from one application to another. It can be turned OFF any time using:</p>
<pre><code>    T1$ oscsend localhost 5510 /noise si xmit 0
</code></pre>
<p>Use the ALIAS (xmit = 2) mode if you need restricted access to your program: when ALIAS is mode is used, only aliases of input elements (sliders, buttons...) can be used to control them, and output elements (bargraph) will only emit on their aliases.</p>
<h2 id="filtering-osc-messages">Filtering OSC messages</h2>
<p>When the transmission of OSC messages is ON, all the user interface elements are sent through the OSC connection.  </p>
<pre><code>    T2: /harpe/level f 0.024000
    T2: /harpe/hand f 0.1
    T2: /harpe/level f 0.024000
    T2: /harpe/hand f 0.25
    T2: /harpe/level f 0.024000
    T2: /harpe/hand f 0.44
    T2: /noise/level f 0.145000
    T2: /harpe/hand f 0.78
    T2: /noise/level f 0.145000
    T2: /harpe/hand f 0.99
</code></pre>
<p>We can choose to filter the unwanted parameters (or group of parameters).  For example:</p>
<pre><code>    T1$ oscsend localhost 5510 /harpe si xmit 1 xmitfilter /harpe/level
</code></pre>
<p>As a result, we will receive:</p>
<pre><code>    T2: /harpe/hand f 0.1
    T2: /harpe/hand f 0.25
    T2: /harpe/hand f 0.44
    T2: /harpe/hand f 0.78
</code></pre>
<p>To reset the filter, send:</p>
<pre><code>    T1$ oscsend localhost 5510 /harpe si xmit 1 xmitfilter
</code></pre>
<h2 id="using-osc-aliases">Using OSC aliases</h2>
<p>Aliases are a convenient mechanism to control a <span class="smallcaps">Faust</span> application from a preexisting set of OSC messages. </p>
<p>Let's say we want to control our noise example with touchOSC on Android. The first step is to configure TouchOSC host to 192.168.1.102 (the host running our noise application) and outgoing port to 5510. </p>
<p>Then we can use oscdump 5510 (after quitting the noise application in order to free port 5510) to visualize the OSC messages sent by TouchOSC. Let's use for that the left slider of simple layout. Here is what we get:</p>
<pre><code>    T2: /1/fader1 f 0.000000
    T2: /1/fader1 f 0.004975
    T2: /1/fader1 f 0.004975
    T2: /1/fader1 f 0.008125
    T2: /1/fader1 f 0.017473
    T2: /1/fader1 f 0.032499
    T2: /1/fader1 f 0.051032
    T2: ...
    T2: /1/fader1 f 0.993289
    T2: /1/fader1 f 1.000000
</code></pre>
<p>We can associate this OSC message to the noise level slider by inserting the metadata [osc:/1/fader1 0 1] into the slider's label:
\marginpar{
Several osc aliases can be inserted into a single label allowing the same widget to be controlled by several OSC messages.</p>
<pre><code>    process = library(&quot;music.lib&quot;).noise * hslider(&quot;level[osc:/1/fader1 0 1]&quot;,0,0,1,0.01);
</code></pre>
<p>Because here the range of /1/fader1 is 0 to 1 like the level slider we can remove the range mapping information and write simply :</p>
<pre><code>    process = library(&quot;music.lib&quot;).noise * hslider(&quot;level[osc:/1/fader1]&quot;, 0, 0, 1, 0.01);
</code></pre>
<p>TouchOSC can also send accelerometer data by enabling Settings/Options/Accelerometer. Using again oscdump 5510 we can visualize the messages send by TouchOSC:</p>
<pre><code>    T2: ...
    T2: /accxyz fff -0.147842 0.019752 9.694721
    T2: /accxyz fff -0.157419 0.016161 9.686341
    T2: /accxyz fff -0.167594 0.012570 9.683948
    T2: ...
</code></pre>
<p>As we can see TouchOSC send the x, y and z accelerometers in a single message, as a triplet of values ranging approximatively from <script type="math/tex">-9.81</script> to <script type="math/tex">9.81</script>. In order to select the appropriate accelerometer we need to concatenate to /accxyz a suffix /0, /1 or /2. For example /accxyz/0 will correspond to x, /accxyz/1 to y, etc. We also need to define a mapping because the ranges are different:</p>
<pre><code> process = library(&quot;music.lib&quot;).noise * hslider(&quot;level[osc:/accxyz/0 0 9.81]&quot;,0,0,1,0.01);
</code></pre>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>alias</strong></td>
<td><strong>description</strong></td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/rotary1 0 1]</span></td>
<td>top left rotary knob</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/rotary2 0 1]</span></td>
<td>middle left rotary knob</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/rotary3 0 1]</span></td>
<td>bottom left rotary knob</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/push1 0 1]</span></td>
<td>bottom left push button</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/push2 0 1]</span></td>
<td>bottom center left push button</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/toggle1 0 1]</span></td>
<td>top center left toggle button</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/toggle2 0 1]</span></td>
<td>middle center left toggle button</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/fader1 0 1]</span></td>
<td>center left vertical fader</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/toggle3 0 1]</span></td>
<td>top center right toggle button</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/toggle4 0 1]</span></td>
<td>middle center right toggle button</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/fader2 0 1]</span></td>
<td>center right vertical toggle button</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/rotary4 0 1]</span></td>
<td>top right rotary knob</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/rotary5 0 1]</span></td>
<td>middle right rotary knob</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/rotary6 0 1]</span></td>
<td>bottom right rotary knob</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/push3 0 1]</span></td>
<td>bottom center right push button</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/push4 0 1]</span></td>
<td>bottom right push button</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/1/fader3 0 1]</span></td>
<td>bottom horizontal fader</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/accxyz/0 -10 10]</span></td>
<td>
<script type="math/tex">x</script> accelerometer</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/accxyz/1 -10 10]</span></td>
<td>
<script type="math/tex">y</script> accelerometer</td>
</tr>
<tr>
<td><span class="lstinline">[osc:/accxyz/2 -10 10]</span></td>
<td>
<script type="math/tex">z</script> accelerometer</td>
</tr>
<tr>
<td><a name="tab:oscalias"></a></td>
<td></td>
</tr>
</tbody>
</table>
<p><span class='caption'>Examples of OSC message aliases for TouchOSC (layout Mix2).</span></p>
<h2 id="osc-cheat-sheet">OSC cheat sheet</h2>
<h3 id="default-ports">Default ports</h3>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="lstinline">5510</span></td>
<td>default listening port</td>
</tr>
<tr>
<td><span class="lstinline">5511</span></td>
<td>default transmission port</td>
</tr>
<tr>
<td><span class="lstinline">5512</span></td>
<td>default error port</td>
</tr>
<tr>
<td><span class="lstinline">5513...</span></td>
<td>alternative listening ports</td>
</tr>
</tbody>
</table>
<h3 id="command-line-options">Command line options</h3>
<table>
<thead>
<tr>
<th align="right"></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td align="right"><span class="lstinline">-port</span> <script type="math/tex">n</script>
</td>
<td>set the port number used by the application to receive messages</td>
</tr>
<tr>
<td align="right"><span class="lstinline">-outport</span> <script type="math/tex">n</script>
</td>
<td>set the port number used by the application to transmit messages</td>
</tr>
<tr>
<td align="right"><span class="lstinline">-errport</span> <script type="math/tex">n</script>
</td>
<td>set the port number used by the application to transmit error messages</td>
</tr>
<tr>
<td align="right"><span class="lstinline">-desthost</span> <script type="math/tex">h</script>
</td>
<td>set the destination host for the messages sent by the application</td>
</tr>
<tr>
<td align="right"><span class="lstinline">-xmit 0|1|2</span></td>
<td>turn transmission OFF, ALL or ALIAS (default OFF)</td>
</tr>
<tr>
<td align="right"><span class="lstinline">-xmitfilter</span> <script type="math/tex">s</script>
</td>
<td>filter the <span class="smallcaps">Faust</span> paths at emission time</td>
</tr>
</tbody>
</table>
<h3 id="discovery-messages">Discovery messages</h3>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="lstinline">oscsend</span> <strong>host</strong> <strong>port</strong> <span class="lstinline">"/*" s hello</span></td>
<td>discover if any OSC application is listening on port <script type="math/tex">port</script>
</td>
</tr>
<tr>
<td><span class="lstinline">oscsend</span> <strong>host</strong> <strong>port</strong> <span class="lstinline">"/*" s get</span></td>
<td>query OSC interface of application listening on port <script type="math/tex">port</script>
</td>
</tr>
<tr>
<td><span class="lstinline">oscsend</span> <strong>host</strong> <strong>port</strong> <span class="lstinline">"/*" s json</span></td>
<td>query JSON description of application listening on port <script type="math/tex">port</script>
</td>
</tr>
</tbody>
</table>
<h3 id="control-messages">Control messages</h3>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="lstinline">oscsend</span> <strong>host</strong> <strong>port</strong> <span class="lstinline">"/*"</span> <span class="lstinline">si xmit 0|1|2</span></td>
<td>set transmission mode</td>
</tr>
<tr>
<td><span class="lstinline">oscsend</span> <strong>host</strong> <strong>port</strong> <strong>widget</strong> <span class="lstinline">s get</span></td>
<td>get widget's value</td>
</tr>
<tr>
<td><span class="lstinline">oscsend</span> <strong>host</strong> <strong>port</strong> <strong>widget</strong> <span class="lstinline">f</span> <script type="math/tex">v</script>
</td>
<td>set widget's value</td>
</tr>
</tbody>
</table>
<h3 id="alias">Alias</h3>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="lstinline">"...[osc:</span> <strong>address</strong>  <strong>lo</strong>  <strong>hi</strong> <span class="lstinline">]..."</span></td>
<td>alias with <strong>lo</strong><script type="math/tex">\rightarrow</script>
<strong>min</strong>, <strong>hi</strong><script type="math/tex">\rightarrow</script>
<strong>max</strong> mapping</td>
</tr>
<tr>
<td><span class="lstinline">"...[osc:</span> <strong>address</strong><span class="lstinline">]..."</span></td>
<td>alias with <strong>min</strong>, <strong>max</strong> clipping</td>
</tr>
</tbody>
</table>
<h2 id="dsp-with-polyphonic-support">DSP with polyphonic support</h2>
<p>When the DSP code is compiled in polyphonic mode, the generated program will create a more complex hierarchy to possibly access and control individual voices.</p>
<p>The following OSC messages reflect the same DSP code either compiled normally, or in polyphonic mode (only part of the OSC hierarchies are displayed here):</p>
<pre><code>// Mono mode

/Organ/vol f -10.0
/Organ/pan f 0.0
</code></pre>
<pre><code>// Polyphonic mode

/Polyphonic/Voices/Organ/pan f 0.0
/Polyphonic/Voices/Organ/vol f -10.0
...
/Polyphonic/Voice1/Organ/vol f -10.0
/Polyphonic/Voice1/Organ/pan f 0.0
...
/Polyphonic/Voice2/Organ/vol f -10.0
/Polyphonic/Voice2/Organ/pan f 0.0
</code></pre>
<p>Note that to save space on the screen, the <span class="lstinline">/Polyphonic/VoiceX/xxx</span> syntax is used when the number of allocated voices is less than 8, then the <span class="lstinline">/Polyphonic/VX/xxx</span> syntax is used when more voices are used.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2020-2023 <a href="https://www.grame.fr">Grame-CNCM</a></p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
