<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <title>Frequently Asked Questions - Faust Documentation
    </title>
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/font-awesome.min.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link href="/css/quickref.css" rel="stylesheet">
    <link href="/css/github.min.css" rel="stylesheet">
    <link href="/rail/railroad-diagrams.css" rel="stylesheet">
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <script src="../../js/bootstrap.min.js" defer></script>
    <script src="../../js/MathJax-2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"defer></script>
    <script src="../../js/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="../.."><img
                    src="../../img/faustText.svg" width="150px"> </a>
            <!-- Expander button -->
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Expanded navigation -->
            <div id="navbar-collapse" class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li class="navitem">
                        <a href="../.." class="nav-link">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Manual <b
                                class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li>
    <a href="../introduction/" class="dropdown-item">Introduction</a>
</li>
                            
<li>
    <a href="../overview/" class="dropdown-item">Overview of the Faust Universe</a>
</li>
                            
<li>
    <a href="../quick-start/" class="dropdown-item">Quick Start</a>
</li>
                            
<li>
    <a href="../syntax/" class="dropdown-item">Faust Syntax</a>
</li>
                            
<li>
    <a href="../errors/" class="dropdown-item">Error Messages</a>
</li>
                            
<li>
    <a href="../compiler/" class="dropdown-item">Using the Compiler</a>
</li>
                            
<li>
    <a href="../options/" class="dropdown-item">Compiler Options</a>
</li>
                            
<li>
    <a href="../tools/" class="dropdown-item">faust2[...] Tools</a>
</li>
                            
<li>
    <a href="../architectures/" class="dropdown-item">Architecture Files</a>
</li>
                            
<li>
    <a href="../embedding/" class="dropdown-item">Embedding the Compiler</a>
</li>
                            
<li>
    <a href="../optimizing/" class="dropdown-item">Optimizing the Code</a>
</li>
                            
<li>
    <a href="../debugging/" class="dropdown-item">Debugging the Code</a>
</li>
                            
<li>
    <a href="../deploying/" class="dropdown-item">Deploying on the Web</a>
</li>
                            
<li>
    <a href="../remote/" class="dropdown-item">Remote Compilation</a>
</li>
                            
<li>
    <a href="../mathdoc/" class="dropdown-item">Mathematical Documentation</a>
</li>
                            
<li>
    <a href="../osc/" class="dropdown-item">OSC Support</a>
</li>
                            
<li>
    <a href="../http/" class="dropdown-item">HTTP Support</a>
</li>
                            
<li>
    <a href="../midi/" class="dropdown-item">MIDI Support</a>
</li>
                            
<li>
    <a href="../soundfiles/" class="dropdown-item">Soundfiles Support</a>
</li>
                            
<li>
    <a href="../community/" class="dropdown-item">Community</a>
</li>
                            
<li>
    <a href="./" class="dropdown-item active">Frequently Asked Questions</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Examples <b
                                class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li>
    <a href="../../examples/ambisonics/" class="dropdown-item"> ambisonics </a>
</li>
                            
<li>
    <a href="../../examples/analysis/" class="dropdown-item"> analysis </a>
</li>
                            
<li>
    <a href="../../examples/bela/" class="dropdown-item"> bela </a>
</li>
                            
<li>
    <a href="../../examples/delayEcho/" class="dropdown-item"> delayEcho </a>
</li>
                            
<li>
    <a href="../../examples/dynamic/" class="dropdown-item"> dynamic </a>
</li>
                            
<li>
    <a href="../../examples/filtering/" class="dropdown-item"> filtering </a>
</li>
                            
<li>
    <a href="../../examples/gameaudio/" class="dropdown-item"> gameaudio </a>
</li>
                            
<li>
    <a href="../../examples/generator/" class="dropdown-item"> generator </a>
</li>
                            
<li>
    <a href="../../examples/misc/" class="dropdown-item"> misc </a>
</li>
                            
<li>
    <a href="../../examples/phasing/" class="dropdown-item"> phasing </a>
</li>
                            
<li>
    <a href="../../examples/physicalModeling/" class="dropdown-item"> physicalModeling </a>
</li>
                            
<li>
    <a href="../../examples/pitchShifting/" class="dropdown-item"> pitchShifting </a>
</li>
                            
<li>
    <a href="../../examples/psychoacoustic/" class="dropdown-item"> psychoacoustic </a>
</li>
                            
<li>
    <a href="../../examples/reverb/" class="dropdown-item"> reverb </a>
</li>
                            
<li>
    <a href="../../examples/smartKeyboard/" class="dropdown-item"> smartKeyboard </a>
</li>
                            
<li>
    <a href="../../examples/spat/" class="dropdown-item"> spat </a>
</li>
                            
<li>
    <a href="../../rsrc/examples.zip" class="dropdown-item"> Download examples </a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Tutorials <b
                                class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li>
    <a href="../../workshops/2020-04-10-faust-juce/" class="dropdown-item">Faust & JUCE</a>
</li>
                            
<li>
    <a href="../../tutorials/teensy/" class="dropdown-item">DSP on the Teensy With Faust</a>
</li>
                            
<li>
    <a href="../../tutorials/esp32/" class="dropdown-item">DSP on the ESP-32 With Faust</a>
</li>
                            
<li>
    <a href="../../tutorials/basic-osc/" class="dropdown-item">Making a Sine Oscillator From Scratch</a>
</li>
                            
<li>
    <a href="../../tutorials/summation/" class="dropdown-item">RMS and Summation in Faust</a>
</li>
                            
<li>
    <a href="../../tutorials/box-api/" class="dropdown-item">Using the box API</a>
</li>
                            
<li>
    <a href="../../tutorials/signal-api/" class="dropdown-item">Using the signal API</a>
</li>
                            
<li>
    <a href="../../tutorials/julia/" class="dropdown-item">Using Faust in Julia</a>
</li>
                            
<li>
    <a href="../../tutorials/cmajor/" class="dropdown-item">Using Faust in Cmajor</a>
</li>
                            
<li>
    <a href="../../tutorials/jsfx/" class="dropdown-item">Using Faust in JSFX</a>
</li>
                            
<li>
    <a href="../../tutorials/rnbo/" class="dropdown-item">Using Faust in RNBO with codebox~</a>
</li>
                            
<li>
    <a href="../../tutorials/debugging/" class="dropdown-item">Advanced debugging with interp-tracer</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Workshops <b
                                class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li>
    <a href="../../workshops/2018-12-01-paw/" class="dropdown-item"> 2018-12-01 PAW </a>
</li>
                            
<li>
    <a href="../../workshops/2020-03-24-faust-citi/" class="dropdown-item"> 2020-03-24 CITI </a>
</li>
                            
<li>
    <a href="../../workshops/2020-04-10-faust-101/" class="dropdown-item"> 2020-04-10 Faust 101 </a>
</li>
                            
<li>
    <a href="../../workshops/2020-04-10-faust-juce/" class="dropdown-item"> 2020-04-10 Faust & JUCE </a>
</li>
                            
<li>
    <a href="../../workshops/2020-11-21-faust-vcvrack/" class="dropdown-item"> 2020-11-21 Faust & VCV Rack </a>
</li>
                        </ul>
                    </li>
                    <li class="navitem">
                        <a href="../../about/" class="nav-link">About</a>
                    </li>
                </ul>

                <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fa fa-search"></i> Search
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    

    <div class="container">
        <div class="row"><div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#frequently-asked-questions" class="nav-link">Frequently Asked Questions</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#when-to-use-int-or-float-cast" class="nav-link">When to use int or float cast ?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#does-select2-behaves-as-a-standard-cc-like-if" class="nav-link">Does select2 behaves as a standard C/C++ like if ?</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#strict-vs-lazy-semantics" class="nav-link">Strict vs Lazy semantics</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#but-things-are-a-little-bit-more-complex" class="nav-link">But things are a little bit more complex...</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#what-properties-does-the-faust-compiler-and-generated-code-have-wip" class="nav-link">What properties does the Faust compiler and generated code have ? [WIP]</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#compiler" class="nav-link">Compiler</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#generated-code" class="nav-link">Generated code</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#memory-footprint" class="nav-link">Memory footprint</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#cpu-footprint" class="nav-link">CPU footprint</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#pattern-matching-and-lists" class="nav-link">Pattern matching and lists</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#what-is-the-situation-about-faust-compiler-licence-and-the-deployed-code" class="nav-link">What is the situation about Faust compiler licence and the deployed code?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#pathnames-in-the-gui-items" class="nav-link">Pathnames in the GUI items</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#surprising-effects-of-vgrouphgroup-on-how-controls-and-parameters-work" class="nav-link">Surprising effects of vgroup/hgroup on how controls and parameters work</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#what-are-the-rules-used-for-partial-application" class="nav-link">What are the rules used for partial application ?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#control-rate-versus-audio-rate" class="nav-link">Control rate versus audio rate</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#displaying-labels-with-numbers" class="nav-link">Displaying labels with numbers</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#semantic-of-bargraphs" class="nav-link">Semantic of bargraphs</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
            <div class="col-md-9 main-container" role="main">

<h1 id="frequently-asked-questions">Frequently Asked Questions</h1>
<h2 id="when-to-use-int-or-float-cast">When to use <code>int</code> or <code>float</code> cast ?</h2>
<p>The <a href="../introduction/#signal-processor-semantic">Signal Processor Semantic</a> section explains what a Faust program describes. In particular Faust considers two type of signals: <em>integer signals</em> and <em>floating point signals</em>. Mathematical operations either occur in the domain of integer numbers, or in the domain of floating point numbers, depending of their types, read <a href="../syntax/#numbers">here</a>. Using explicit <a href="../syntax/#int-primitive">int cast</a> or <a href="../syntax/#float-primitive">float cast</a> may be needed to force a given computation to be done in the correct number domain.</p>
<p>Some language primitives (like <a href="../syntax/#parallel-composition">par</a>, <a href="../syntax/#sequential-composition">seq</a>, <a href="../syntax/#route-primitive">route</a>, <a href="../syntax/#soundfile-primitive">soundfile</a>, etc.) assume that their parameters are <a href="../syntax/#constant-numerical-expressions">Constant Numerical Expressions</a> of the integer type. In this case the compiler automatically does <em>type promotion</em> and there is no need to use <code>int</code> cast to have the argument be of the integer type (note that an uneeded cast will simply be ignored and will not add uneeded computation in the generated code). </p>
<p>User interface items produce <em>floating point signals</em>. Depending of their use later in the computed expression, using explicit <code>int</code> cast may be needed also to force a given computation to be done in the correct number domain.</p>
<h2 id="does-select2-behaves-as-a-standard-cc-like-if">Does select2 behaves as a standard C/C++ like if ?</h2>
<p>The short answer is <strong>no</strong>, <code>select2</code> doesn't behave like the <code>if-then-else</code> of a traditional programming language, nor does <code>ba.if</code> of the standard library. To understand why, think of <code>select2</code> as the tuner of a radio, it selects what you listen, but does not prevent the various radio stations from broadcasting. Actually, <code>select2</code> could be easily redefined in Faust as:</p>
<pre><code>select2(i, x, y) = (1-i) * x + i * y;
</code></pre>
<h3 id="strict-vs-lazy-semantics">Strict vs Lazy semantics</h3>
<p>In computer science terminology, <code>select2(i,x,y)</code> has so-called <em>strict</em> semantics. This means that its three arguments <code>i</code>, <code>x</code>, <code>y</code> are always evaluated before select2 itself is executed, in other words, even if <code>x</code> or <code>y</code> is not selected. The standard C/C++ <code>if-then-else</code> has <em>lazy</em> semantics. The <em>condition</em> is always executed, but depending of the value of the <em>condition</em>, only the <em>then</em> or the <em>else</em> branch is executed. </p>
<p>The <em>strict</em> semantics of <code>select2</code> means that you cannot use it to prevent a division by 0 in an expression, or the square root of a negative number, etc... For example, the following code will not prevent a division by 0 error:</p>
<pre><code>select2(x == 0, 1/x, 10000); 
</code></pre>
<p>You cannot use <code>ba.if</code> either because it is implemented using <code>select2</code> and has the same strict semantics. Therefore the following code will not prevent a division by 0 error:</p>
<pre><code>ba.if(x == 0, 10000, 1/x);
</code></pre>
<h3 id="but-things-are-a-little-bit-more-complex">But things are a little bit more complex...</h3>
<p>Concerning the way <code>select2</code> is compiled by the Faust compiler, the strict semantic is always preserved. In particular, the type system flags problematic expressions and the stateful parts are always placed outside the if. For instance the DSP code:</p>
<pre><code>process = button(&quot;choose&quot;), (*(3) : +~_), (*(7):+~_) : select2;
</code></pre>
<p>is compiled as the following C++ code, where <code>fRec0[0]</code> and <code>fRec1[0]</code> contains the computation of each branch:</p>
<pre><code class="language-c++">for (int i = 0; (i &lt; count); i = (i + 1)) {
    fRec0[0] = (fRec0[1] + (3.0f * float(input0[i])));
    fRec1[0] = (fRec1[1] + (7.0f * float(input1[i])));
    output0[i] = FAUSTFLOAT((iSlow0 ? fRec1[0] : fRec0[0]));
    fRec0[1] = fRec0[0];
    fRec1[1] = fRec1[0];
}
</code></pre>
<p>For code optimization strategies, the generated code is not <em>fully</em> strict on <code>select2</code>. When Faust produces C++ code, the C++ compiler can decide to <em>avoid the execution of the stateless part of the signal that is not selected</em> (and not needed elsewhere). This doesn't change the semantics of the output signal, but it changes the strictness of the code if a division by 0 would have been executed in the stateless part. When stateless expressions are used, they are by default generated using a <em>non-strict</em> conditional expression. </p>
<p>For instance the following DSP code:</p>
<pre><code>process = select2((+(1)~_)%10, sin:cos:sin:cos, cos:sin:cos:sin);
</code></pre>
<p>is compiled in C/C++ as:</p>
<pre><code class="language-c++">for (int i0 = 0; i0 &lt; count; i0 = i0 + 1) {
    iRec0[0] = iRec0[1] + 1;
    output0[i0] = FAUSTFLOAT(((iRec0[0] % 10) 
        ? std::sin(std::cos(std::sin(std::cos(float(input1[i0]))))) 
        : std::cos(std::sin(std::cos(std::sin(float(input0[i0])))))));
    iRec0[1] = iRec0[0];
}
</code></pre>
<p>where only one of the <em>then</em> or <em>else</em> branch will be effectively computed, thus saving CPU. </p>
<p>If computing both branches is really desired, the <code>-sts (--strict-select)</code> option can be used to force their computation by putting them in local variables, as shown in the following <em>generated with <code>-sts</code></em> code version of the same DSP code:</p>
<pre><code class="language-c++">for (int i0 = 0; i0 &lt; count; i0 = i0 + 1) {
    iRec0[0] = iRec0[1] + 1;
    float fThen0 = std::cos(std::sin(std::cos(std::sin(float(input0[i0])))));
    float fElse0 = std::sin(std::cos(std::sin(std::cos(float(input1[i0])))));
    output0[i0] = FAUSTFLOAT(((iRec0[0] % 10) ? fElse0 : fThen0));
    iRec0[1] = iRec0[0];
}
</code></pre>
<p>to therefore preserve the strict semantic, even if a non-strict <code>(cond) ? then : else</code> form is used to produce the result of the <code>select2</code> expression. </p>
<p>This can be helpful for <a href="../debugging/#debugging-at-runtime">debugging purposes</a> like testing if there is no division by 0, or producing <code>INF</code> or <code>NaN</code> values. The <a href="https://github.com/grame-cncm/faust/tree/master-dev/tools/benchmark#interp-tracer">interp-tracer</a> can be used for that by adding  the <code>-sts</code> option.</p>
<p>So again remember that <code>select2</code> cannot be used to <strong>avoid computing something</strong>. For computations that need to avoid some values or ranges (like doing  <code>val/0</code> that would return <code>INF</code>, or <code>log</code> of a negative value that would return <code>NaN</code>), the solution is to use  <code>min</code> and  <code>max</code> to force the arguments to be in the correct domain of values. For example, to avoid division by 0, you can write <code>1/max(ma.EPSILON, x)</code>. </p>
<p>Note that <code>select2</code> is also typically used to compute  <code>rdtable/rwtable</code> access indexes. In this case computing an array <em>out-of-bound</em> index, if is not used later on, is not a problem. </p>
<h2 id="what-properties-does-the-faust-compiler-and-generated-code-have-wip">What properties does the Faust compiler and generated code have ? [WIP]</h2>
<h3 id="compiler">Compiler</h3>
<p>The compiler itself is <a href="https://en.wikipedia.org/wiki/Turing_completeness">turing complete</a> because it contains a pattern matching meta-programming model. Thus a Faust DSP program can loop at compile time. For instance the following:</p>
<pre><code>foo = foo;
process = foo;
</code></pre>
<p>will loop and hopefully end with the message: <em>ERROR : after 400 evaluation steps, the compiler has detected an endless evaluation cycle of 2 steps</em> because the compiler contains an infinite loop detection heuristic.</p>
<h3 id="generated-code">Generated code</h3>
<p>The generated code computes the sample in a <em>finite number</em> of operations, thus a DSP program that would loop infinitely cannot be written. It means the generated code is not turing complete. This is of course a limitation because certain classes of algorithms cannot be expressed (<strong>TODO</strong>: Newton approximation used in diode VA model). But on the contrary it gives a strong garanty on the upper bound of CPU cost that is quite interesting to have when deploying a program in a real-time audio context.</p>
<h3 id="memory-footprint">Memory footprint</h3>
<p>The DSP memory footprint is perfectly known at compile time, so the generated code always consume a finite amount of memory. Moreover the standard deployement model is to allocate the DSP a load time, init it with a given sample-rate, then execute the DSP code, be repeatedly calling the <code>compute</code> function to process audio buffers.</p>
<h3 id="cpu-footprint">CPU footprint</h3>
<p>Since the generated code computes the sample in a <em>finite number</em> of operations, the CPU use has an upper bound which is a very helpful property when deploying a program in a real-time audio context. Read the <a href="#does-select2-behaves-as-a-standard-cc-like-if">Does select2 behaves as a standard C/C++ like if ?</a> for some subtle issues concerning the <code>select2</code> primitive.</p>
<h2 id="pattern-matching-and-lists">Pattern matching and lists</h2>
<p>Strictly speaking, there are no lists in Faust. For example the expression <code>()</code> or <code>NIL</code> in Lisp, which indicates an empty list, does not exist in Faust. Similarly, the distinction in Lisp between the number <code>3</code> and the list with only one element <code>(3)</code> does not exist in Faust. </p>
<p>However, list operations can be simulated (in part) using the parallel binary composition operation <code>,</code> and pattern matching. The parallel composition operation is right-associative. This means that the expression <code>(1,2,3,4)</code> is just a simplified form of the fully parenthesized expression <code>(1,(2,(3,4)))</code>. The same is true for <code>(1,2,(3,4))</code> which is also a simplified form of the same fully parenthesized expression <code>(1,(2,(3,4)))</code>. </p>
<p>You can think of pattern-matching as always being done on fully parenthesized expressions. Therefore no Faust function can ever distinguish <code>(1,2,3,4)</code> from <code>(1,2,(3,4))</code>, because they represent the same fully parenthesized expression <code>(1,(2,(3,4)))</code>. </p>
<p>This is why <code>ba.count( ((1,2), (3,4), (5,6)) )</code> is not 3 but 4, and also why <code>ba.count( ((1,2), ((3,4),5,6)) )</code> is not 2 but 4. </p>
<p>Explanation: in both cases the fully parenthesized expression is <code>( (1,2),((3,4),(5,6)) )</code>. The definition of  <code>ba.count</code> being:</p>
<pre><code>count((x,y)) = 1 + count(y);  // rule R1
count(x)     = 1;             // rule R2 
</code></pre>
<p>we have:</p>
<pre><code>ba.count( ((1,2),((3,4),(5,6))) ) 
-R1-&gt;   1 + ba.count( ((3,4),(5,6)) ) 
-R1-&gt;   1 + 1 +  ba.count( (5,6) ) 
-R1-&gt;   1 + 1 + 1 + ba.count( 6 )
-R2-&gt;   1 + 1 + 1 + 1 
</code></pre>
<p>Please note that pattern matching is not limited to parallel composition, the other composition operators <code>(&lt;: : :&gt; ~)</code> can be used too.</p>
<h2 id="what-is-the-situation-about-faust-compiler-licence-and-the-deployed-code">What is the situation about Faust compiler licence and the deployed code?</h2>
<p><em>Question: Does the Faust compiler license (LGPL) apply somehow to the code exports that it produces as well? Or can the license of the exported code be freely chosen such that one could develop proprietary software (e.g. VST plugins) using Faust?</em></p>
<p>Answer: You can freely use Faust to develop proprietary software. The LGPL license of the compiler <em>doesn't</em> apply to the code generated by the compiler. </p>
<p>The license of the code generated by the Faust compiler depends only on the licenses of the input files. You should therefore check the licenses of the Faust libraries used and the architecture files. On the whole, when used unmodified, Faust libraries and architecture files are compatible with proprietary, non-open source use.</p>
<h2 id="pathnames-in-the-gui-items">Pathnames in the GUI items</h2>
<p>Compiling the following code:</p>
<pre><code>import(&quot;stdfaust.lib&quot;);
nBands = 8;
filterBank(N) = hgroup(&quot;Filter Bank&quot;,seq(i,N,oneBand(i)))
with {
    oneBand(j) = vgroup(&quot;[%j]Band&quot;,fi.peak_eq(l,f,b))
    with {
        a = j+1; // just so that band numbers don't start at 0
        l = vslider(&quot;[2]Level[unit:db]&quot;,0,-70,12,0.01) : si.smoo;
        f = nentry(&quot;[1]Freq&quot;,(80+(1000*8/N*(j+1)-80)),20,20000,0.01) : si.smoo;
        b = f/hslider(&quot;[0]Q[style:knob]&quot;,1,1,50,0.01) : si.smoo;
    };
};
process = filterBank(nBands);
</code></pre>
<p>gives the <code>ERROR : path '/Filter_Bank/Band/Q' is already used</code> message. This is because we typically want to distinguish pathnames to be controlled by OSC messages for instance. So a proper solution would be to rewrite the code with:</p>
<pre><code>import(&quot;stdfaust.lib&quot;);
nBands = 8;
filterBank(N) = hgroup(&quot;Filter Bank&quot;,seq(i,N,oneBand(i)))
with {
    oneBand(j) = vgroup(&quot;[%j]Band %a&quot;,fi.peak_eq(l,f,b))
    with {
        a = j+1; // just so that band numbers don't start at 0
        l = vslider(&quot;[2]Level[unit:db]&quot;,0,-70,12,0.01) : si.smoo;
        f = nentry(&quot;[1]Freq&quot;,(80+(1000*8/N*(j+1)-80)),20,20000,0.01) : si.smoo;
        b = f/hslider(&quot;[0]Q[style:knob]&quot;,1,1,50,0.01) : si.smoo;
    };
};
process = filterBank(nBands);
</code></pre>
<p>to produce this GUI:</p>
<p><img src="pathname.png" class="mx-auto d-block" width="50%">
<center><em>Distinct GUI items to have different pathnames </em></center></p>
<p>The rules ares the following:</p>
<ul>
<li>Two input control cannot have a same path (ERROR)</li>
<li>An input control and a bargraph cannot have the same path (ERROR)</li>
<li>Two bargraph can have the same path (<a href="../errors/#warning-messages">WARNING</a>)</li>
</ul>
<h2 id="surprising-effects-of-vgrouphgroup-on-how-controls-and-parameters-work">Surprising effects of vgroup/hgroup on how controls and parameters work</h2>
<p>User interface widget primitives like <code>button</code>, <code>vslider/hslider</code>, <code>vbargraph/hbargraph</code> allow for an abstract description of a user interface from within the Faust code. They can be grouped in a hierarchical manner using <code>vgroup/hgroup/tgroup</code> primitives. Each widget then has an associated path name obtained by concatenating the labels of all its surrounding groups with its own label.</p>
<p>Widgets that have the <strong>same path</strong> in the hierarchical structure will correspond to a same controller and will appear once in the GUI. For instance the following DSP code does not contain any explicit grouping mechanism:</p>
<pre><code>import(&quot;stdfaust.lib&quot;);

freq1 = hslider(&quot;Freq1&quot;, 500, 200, 2000, 0.01);
freq2 = hslider(&quot;Freq2&quot;, 500, 200, 2000, 0.01);

process = os.osc(freq1) + os.square(freq2), os.osc(freq1) + os.triangle(freq2);
</code></pre>
<p><img src="group1.png" class="mx-auto d-block" width="50%">
<center><em>Shared freq1 and freq2 controllers</em></center></p>
<p>So even if  <code>freq1</code> and  <code>freq2</code> controllers are used as parameters at four different places, <code>freq1</code> used in <code>os.osc(freq1)</code> and <code>os.square(freq1)</code> will have the same path (like <code>/foo/Freq1</code>), be associated to a unique controller, and will finally appear once in the GUI. And this is the same mecanism for <code>freq2</code>.</p>
<p>Now if some grouping mecanism is used to better control the UI rendering, as in the following DSP code: </p>
<pre><code>import(&quot;stdfaust.lib&quot;);

freq1 = hslider(&quot;Freq1&quot;, 500, 200, 2000, 0.01);
freq2 = hslider(&quot;Freq2&quot;, 500, 200, 2000, 0.01);

process = hgroup(&quot;Voice1&quot;, os.osc(freq1) + os.square(freq2)), hgroup(&quot;Voice2&quot;, os.osc(freq1) + os.triangle(freq2));
</code></pre>
<p>The <code>freq1</code> and  <code>freq2</code> controllers now don't have the same path in each group (like <code>/foo/Voice1/Freq1</code> and <code>/foo/Voice1/Freq2</code> in the first group, and <code>/foo/Voice2/Freq1</code> and <code>/foo/Voice2/Freq2</code> in the second group), and so four separated controllers and UI items are finally created. </p>
<p><img src="group2.png" class="mx-auto d-block" width="60%">
<center><em>Four freq1 and freq2 controllers</em></center></p>
<p>Using the relative pathname as explained in <a href="../syntax/#labels-as-pathnames">Labels as Pathnames</a> possibly allows us to move <code>freq1</code> one step higher in the hierarchical structure, thus having again a unique path (like <code>/foo/Freq1</code>) and controller: </p>
<pre><code>import(&quot;stdfaust.lib&quot;);

freq1 = hslider(&quot;../Freq1&quot;, 500, 200, 2000, 0.01);
freq2 = hslider(&quot;Freq2&quot;, 500, 200, 2000, 0.01);

process = hgroup(&quot;Voice1&quot;, os.osc(freq1) + os.square(freq2)), hgroup(&quot;Voice2&quot;, os.osc(freq1) + os.triangle(freq2));
</code></pre>
<p><img src="group3.png" class="mx-auto d-block" width="40%">
<center><em>freq1 moved one step higher in the hierarchical structure</em></center></p>
<p>Note that the name for a given <code>hgroup</code>, <code>vgroup</code>, or <code>tgroup</code> can be used more than once, and they will be merged. This can be useful when you want to define different names for different widget signals, but still want to group them. For example, this pattern can be used to separate a synth's UI design from the implementation of the synth's DSP:</p>
<pre><code>import (&quot;stdfaust.lib&quot;);

synth(foo, bar, baz) = os.osc(foo+bar+baz);

synth_ui = synth(foo, bar, baz)
with {
    ui(x) = hgroup(&quot;Synth&quot;, x);
    leftcol(x) = ui(vgroup(&quot;[0]foobar&quot;, x));
    foo = leftcol(hslider(&quot;[0]foo&quot;, 100, 20, 1000, 1));
    bar = leftcol(hslider(&quot;[1]bar&quot;, 100, 20, 1000, 1));
    baz = ui(vslider(&quot;[1]baz&quot;, 100, 20, 1000, 1));
};

process = synth_ui;
</code></pre>
<p><img src="group4.png" class="mx-auto d-block" width="40%">
<center><em>naming and grouping</em></center></p>
<h2 id="what-are-the-rules-used-for-partial-application">What are the rules used for partial application ?</h2>
<p>Assuming <code>F</code> is not an abstraction and has <code>n+m</code> inputs and <code>A</code> has <code>n</code> outputs, then we have the rewriting rule <code>F(A) ==&gt; A,bus(m):F (with bus(1) = _ and bus(n+1) = _,bus(n))</code></p>
<p>There is an exception when <code>F</code> is a binary operation like <code>+,-,/,*</code>. In this case, the rewriting rule is <code>/(3) ==&gt; _,3:/</code>. In other words, when we apply only one argument, it is the second one.</p>
<h2 id="control-rate-versus-audio-rate">Control rate versus audio rate</h2>
<p>Question: <em>I have a question about sample rate / control rate issues. I have a Faust code that takes channel pressure messages from my keyboard as input, therefore at control rate, and outputs an expression signal at sample rate. The first part of the code can run at control rate, but I want to force it to run at sample rate (otherwise unwanted behavior will appear). Is there a simple way of forcing my pressure signal to be at sample rate (without making a smooth which may also result in unwanted behavior)</em>.</p>
<p>Answer: the <a href="https://faustlibraries.grame.fr/libs/basics/#bakr2ar">ba.kr2ar</a> function can be used for that purpose.</p>
<h2 id="displaying-labels-with-numbers">Displaying labels with numbers</h2>
<p>Question: <em>Is there a way to force the sliders to show in numerical order respecting tens?</em> </p>
<p>Answer: Labels can contain variable parts. These are indicated with the sign % followed by the name of a variable. For a detailed explanation of how to use this feature, refer to the <a href="../syntax/#variable-parts-of-a-label">comprehensive documentation</a>.</p>
<h2 id="semantic-of-bargraphs">Semantic of bargraphs</h2>
<p>Question: <em>When are  control rate outputs (like hbargraph/vbargraph) calculated every sample ?</em> </p>
<p>Answer: This depends on the nature of the signal entering the bargraph. If it's a control rate signal, as in <code>process = vslider("foo", 0, 0, 1, 0.01) : vbargraph("bar", 0, 1);</code>, then updating is done at control rate:</p>
<pre><code class="language-C++">virtual void compute(int count, FAUSTFLOAT** inputs, FAUSTFLOAT** outputs)
{
    FAUSTFLOAT* output0 = outputs[0];
    fVbargraph0 = FAUSTFLOAT(float(fVslider0));
    float fSlow0 = fVbargraph0;
    for (int i0 = 0; i0 &lt; count; i0 = i0 + 1) {
        output0[i0] = FAUSTFLOAT(fSlow0);
    }
}
</code></pre>
<p>But if the signal is at sample rate, as in <code>process = vslider("foo", 0, 0, 1, 0.01) : si.smooth(0.9) : vbargraph("bar", 0, 1);</code>, the calculation must be at sample rate to be correct (that is to properly update the signal state at each sample), even if all the values are not displayed:</p>
<pre><code class="language-C++">virtual void compute(int count, FAUSTFLOAT** inputs, FAUSTFLOAT** outputs) 
{
    FAUSTFLOAT* output0 = outputs[0];
    float fSlow0 = fConst0 * float(fVslider0);
    for (int i0 = 0; i0 &lt; count; i0 = i0 + 1) {
        fRec0[0] = fSlow0 + fConst1 * fRec0[1];
        fVbargraph0 = FAUSTFLOAT(fRec0[0]);
        output0[i0] = FAUSTFLOAT(fVbargraph0);
        fRec0[1] = fRec0[0];
    }
}
</code></pre></div>
        </div>
    </div>

    <footer class="col-md-12">
        <hr>
        <p>Copyright &copy; 2020-2025 <a href="https://www.grame.fr">Grame-CNCM</a></p>
    </footer>
    <script>
        var base_url = "../..",
        shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
    </script>
    <script src="../../js/base.js" defer></script>
    <script src="/js/faust-web-component.js" defer></script>
    <script src="../../search/main.js" defer></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
