<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <title>Using Faust in JSFX - Faust Documentation
    </title>
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/font-awesome.min.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link href="/css/quickref.css" rel="stylesheet">
    <link href="/css/github.min.css" rel="stylesheet">
    <link href="/rail/railroad-diagrams.css" rel="stylesheet">
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <script src="../../js/bootstrap.min.js" defer></script>
    <script src="../../js/MathJax-2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"defer></script>
    <script src="../../js/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="../.."><img
                    src="../../img/faustText.svg" width="150px"> </a>
            <!-- Expander button -->
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Expanded navigation -->
            <div id="navbar-collapse" class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li class="navitem">
                        <a href="../.." class="nav-link">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Manual <b
                                class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li>
    <a href="../../manual/introduction/" class="dropdown-item">Introduction</a>
</li>
                            
<li>
    <a href="../../manual/overview/" class="dropdown-item">Overview of the Faust Universe</a>
</li>
                            
<li>
    <a href="../../manual/quick-start/" class="dropdown-item">Quick Start</a>
</li>
                            
<li>
    <a href="../../manual/syntax/" class="dropdown-item">Faust Syntax</a>
</li>
                            
<li>
    <a href="../../manual/errors/" class="dropdown-item">Error Messages</a>
</li>
                            
<li>
    <a href="../../manual/compiler/" class="dropdown-item">Using the Compiler</a>
</li>
                            
<li>
    <a href="../../manual/options/" class="dropdown-item">Compiler Options</a>
</li>
                            
<li>
    <a href="../../manual/tools/" class="dropdown-item">faust2[...] Tools</a>
</li>
                            
<li>
    <a href="../../manual/architectures/" class="dropdown-item">Architecture Files</a>
</li>
                            
<li>
    <a href="../../manual/embedding/" class="dropdown-item">Embedding the Compiler</a>
</li>
                            
<li>
    <a href="../../manual/optimizing/" class="dropdown-item">Optimizing the Code</a>
</li>
                            
<li>
    <a href="../../manual/debugging/" class="dropdown-item">Debugging the Code</a>
</li>
                            
<li>
    <a href="../../manual/deploying/" class="dropdown-item">Deploying on the Web</a>
</li>
                            
<li>
    <a href="../../manual/remote/" class="dropdown-item">Remote Compilation</a>
</li>
                            
<li>
    <a href="../../manual/mathdoc/" class="dropdown-item">Mathematical Documentation</a>
</li>
                            
<li>
    <a href="../../manual/osc/" class="dropdown-item">OSC Support</a>
</li>
                            
<li>
    <a href="../../manual/http/" class="dropdown-item">HTTP Support</a>
</li>
                            
<li>
    <a href="../../manual/midi/" class="dropdown-item">MIDI Support</a>
</li>
                            
<li>
    <a href="../../manual/soundfiles/" class="dropdown-item">Soundfiles Support</a>
</li>
                            
<li>
    <a href="../../manual/community/" class="dropdown-item">Community</a>
</li>
                            
<li>
    <a href="../../manual/faq/" class="dropdown-item">Frequently Asked Questions</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Examples <b
                                class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li>
    <a href="../../examples/ambisonics/" class="dropdown-item"> ambisonics </a>
</li>
                            
<li>
    <a href="../../examples/analysis/" class="dropdown-item"> analysis </a>
</li>
                            
<li>
    <a href="../../examples/bela/" class="dropdown-item"> bela </a>
</li>
                            
<li>
    <a href="../../examples/delayEcho/" class="dropdown-item"> delayEcho </a>
</li>
                            
<li>
    <a href="../../examples/dynamic/" class="dropdown-item"> dynamic </a>
</li>
                            
<li>
    <a href="../../examples/filtering/" class="dropdown-item"> filtering </a>
</li>
                            
<li>
    <a href="../../examples/gameaudio/" class="dropdown-item"> gameaudio </a>
</li>
                            
<li>
    <a href="../../examples/generator/" class="dropdown-item"> generator </a>
</li>
                            
<li>
    <a href="../../examples/misc/" class="dropdown-item"> misc </a>
</li>
                            
<li>
    <a href="../../examples/phasing/" class="dropdown-item"> phasing </a>
</li>
                            
<li>
    <a href="../../examples/physicalModeling/" class="dropdown-item"> physicalModeling </a>
</li>
                            
<li>
    <a href="../../examples/pitchShifting/" class="dropdown-item"> pitchShifting </a>
</li>
                            
<li>
    <a href="../../examples/psychoacoustic/" class="dropdown-item"> psychoacoustic </a>
</li>
                            
<li>
    <a href="../../examples/reverb/" class="dropdown-item"> reverb </a>
</li>
                            
<li>
    <a href="../../examples/SAM/" class="dropdown-item"> SAM </a>
</li>
                            
<li>
    <a href="../../examples/smartKeyboard/" class="dropdown-item"> smartKeyboard </a>
</li>
                            
<li>
    <a href="../../examples/spat/" class="dropdown-item"> spat </a>
</li>
                            
<li>
    <a href="../../rsrc/examples.zip" class="dropdown-item"> Download examples </a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Tutorials <b
                                class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li>
    <a href="../../workshops/2020-04-10-faust-juce/" class="dropdown-item">Faust & JUCE</a>
</li>
                            
<li>
    <a href="../teensy/" class="dropdown-item">DSP on the Teensy With Faust</a>
</li>
                            
<li>
    <a href="../esp32/" class="dropdown-item">DSP on the ESP-32 With Faust</a>
</li>
                            
<li>
    <a href="../basic-osc/" class="dropdown-item">Making a Sine Oscillator From Scratch</a>
</li>
                            
<li>
    <a href="../summation/" class="dropdown-item">RMS and Summation in Faust</a>
</li>
                            
<li>
    <a href="../box-api/" class="dropdown-item">Using the box API</a>
</li>
                            
<li>
    <a href="../signal-api/" class="dropdown-item">Using the signal API</a>
</li>
                            
<li>
    <a href="../julia/" class="dropdown-item">Using Faust in Julia</a>
</li>
                            
<li>
    <a href="../cmajor/" class="dropdown-item">Using Faust in Cmajor</a>
</li>
                            
<li>
    <a href="./" class="dropdown-item active">Using Faust in JSFX</a>
</li>
                            
<li>
    <a href="../rnbo/" class="dropdown-item">Using Faust in RNBO with codebox~</a>
</li>
                            
<li>
    <a href="../debugging/" class="dropdown-item">Advanced debugging with interp-tracer</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Workshops <b
                                class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li>
    <a href="../../workshops/2018-12-01-paw/" class="dropdown-item"> 2018-12-01 PAW </a>
</li>
                            
<li>
    <a href="../../workshops/2020-03-24-faust-citi/" class="dropdown-item"> 2020-03-24 CITI </a>
</li>
                            
<li>
    <a href="../../workshops/2020-04-10-faust-101/" class="dropdown-item"> 2020-04-10 Faust 101 </a>
</li>
                            
<li>
    <a href="../../workshops/2020-04-10-faust-juce/" class="dropdown-item"> 2020-04-10 Faust & JUCE </a>
</li>
                            
<li>
    <a href="../../workshops/2020-11-21-faust-vcvrack/" class="dropdown-item"> 2020-11-21 Faust & VCV Rack </a>
</li>
                        </ul>
                    </li>
                    <li class="navitem">
                        <a href="../../about/" class="nav-link">About</a>
                    </li>
                </ul>

                <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fa fa-search"></i> Search
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    

    <div class="container">
        <div class="row"><div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#using-faust-in-jsfx" class="nav-link">Using Faust in JSFX</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="4"><a href="#who-is-this-tutorial-for" class="nav-link">Who is this tutorial for?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#using-command-line-tools" class="nav-link">Using command line tools</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#generating-jsfx-code" class="nav-link">Generating JSFX code</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#midi-basic-example" class="nav-link">MIDI basic example</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#midi-polyphonic-example" class="nav-link">MIDI polyphonic example</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#using-the-faust-web-ide" class="nav-link">Using the Faust Web IDE</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#generating-a-jsfx-file" class="nav-link">Generating a JSFX file</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#generating-a-jsfx-file-in-polyphonic-mode" class="nav-link">Generating a JSFX file in polyphonic mode</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#limitations" class="nav-link">Limitations</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
            <div class="col-md-9 main-container" role="main">

<h1 id="using-faust-in-jsfx">Using Faust in JSFX</h1>
<p>In this tutorial, we present how <a href="https://faust.grame.fr">Faust</a> can be used with <a href="https://www.reaper.fm/sdk/js/js.php">JSFX</a>, a scripting language used in <a href="https://www.reaper.fm">Reaper</a>. The JSFX engine is integrated in Reaper by default, and can also be found as a plugin opcode for Csound, as well as a set of standalone projects : <a href="https://github.com/jpcima/ysfx">ysfx</a>, <a href="https://github.com/asb2m10/jsusfx/tree/bcc9cd7b910ee7bba5b4cd2649448ade2ec15712">jsusfx</a>. 
The JSFX language is based on Cockos <a href="https://www.cockos.com/EEL2/">EEL2</a> open-source programming language.</p>
<h4 id="who-is-this-tutorial-for">Who is this tutorial for?</h4>
<p>The <a href="#using-command-line-tools">first section</a> assumes a working <a href="https://github.com/grame-cncm/faust">Faust compiler installed</a> on the machine, so is more designed for regular Faust users. The <a href="#using-the-faust-web-ide">second section</a> is better suited for JSFX users who want to discover Faust.  </p>
<h2 id="using-command-line-tools">Using command line tools</h2>
<h3 id="generating-jsfx-code">Generating JSFX code</h3>
<p>Assuming you've <a href="https://github.com/grame-cncm/faust/wiki/BuildingSimple">compiled and installed</a> the <strong>faust</strong> compiler from the <a href="https://github.com/grame-cncm/faust">master-dev branch</a>, starting from the following DSP <strong>osc.dsp</strong> program:</p>
<!-- faust-run -->
<div class="faust-run"><img src="exfaust0/exfaust0.svg" class="mx-auto d-block">
<faust-editor><!--

import("stdfaust.lib");

vol = hslider("volume [unit:dB]", 0, -96, 0, 0.1) : ba.db2linear : si.smoo;
freq1 = hslider("freq1 [unit:Hz]", 1000, 20, 3000, 1);
freq2 = hslider("freq2 [unit:Hz]", 200, 20, 3000, 1);

process = vgroup("Oscillator", os.osc(freq1) * vol, os.osc(freq2) * vol);

--></faust-editor>
<br>
</div>
<!-- /faust-run -->

<p>The JSFX code can be generated using</p>
<pre><code class="language-bash">faust -lang jsfx osc.dsp -o osc.jsfx 
</code></pre>
<p>This will generate JSFX code that follows the standard JSFX file structure: </p>
<pre><code class="language-jsfx">@init // init section

@block // control section 

@slider // called when a control value changes

@sample // audio computation section
</code></pre>
<p>This code can be directly imported in Reaper or placed in Reaper Effects directory. 
<img src="img/jsfx_reaper.png" class="mx-auto d-block" width="100%">
<center><em>Generated JSFX plugin in Reaper</em></center></p>
<p>The generated code is fully self-contained and can be directly imported as a Reaper JSFX audio plugin, on any supported platform. </p>
<p>At the top of the generated file, a few lines are dedicated to report file description and metadata.
Then, the initialization starts with:  </p>
<ul>
<li>Sliders</li>
<li>Inputs and outputs</li>
</ul>
<pre><code class="language-jsfx">slider1:fHslider0=1000&lt;20,3000,1&gt;hslider_freq10
slider2:fHslider2=200&lt;20,3000,1&gt;hslider_freq20
slider3:fHslider1=0&lt;-96,0,0.1&gt;hslider_volume0

out_pin:output0
out_pin:output1
</code></pre>
<p>In JSFX, sliders are the only available controls that match Faust controls. It has been decided that buttons and checkboxes are thus represented as <strong><em>0-1</em></strong> sliders in JSFX. </p>
<p>Next, the <code>@init</code> section starts with all required functions - including math functions missing in JSFX and memory management functions.
These functions will always be included in generated JSFX code, since the rest of the code requires it. </p>
<p>The <code>@init</code> section then defines a few constants (bitmasks for MIDI processing, and useful constants for processing like number of voices <code>nvoices</code>).
The actual DSP part starts right after these constants. 
Global tables are then allocated, here the table where sine waveform will be computed: </p>
<pre><code>ftbl0mydspSIG0 = MEMORY.alloc_memory(65536);
</code></pre>
<p>And the structure of our DSP class is defined. Since JSFX is not a real object oriented programming language, we use indexes inside memory chunks to access DSP object members. 
Each object itself is represented as an address in JSFX preallocated memory. The <code>dsp.</code> fields indicate the position of members inside the object memory. </p>
<pre><code>// DSP struct memory layout
dsp.memory = MEMORY.alloc_memory(0);
ddsp.size = 24;
dsp.iVec1 = 0;
dsp.fHslider0 = 2;
dsp.fSampleRate = 3;
dsp.fConst1 = 4;
dsp.fRec1 = 5;
dsp.fConst2 = 7;
dsp.fConst3 = 8;
dsp.fHslider1 = 9;
dsp.fRec2 = 10;
dsp.fHslider2 = 12;
dsp.fRec3 = 13;
dsp.iVec0 = 15;
dsp.iRec0 = 17;
dsp.fSlow0 = 19;
dsp.fSlow1 = 20;
dsp.fSlow2 = 21;
dsp.output0 = 22;
dsp.output1 = 23;
</code></pre>
<p>The next part consists in two functions used to create DSP objects, allocate their memory and initialize their states. One object represents one voice. If an object has no <code>[nvoices]</code> metadata, or if <code>[nvoices:1]</code>, only one object will be created. The <code>create_instance</code> function allocates memory, then <code>init_instances</code> precomputes object state, including constants and everything that doesn't need to be computed at runtime. </p>
<p>Finally, the <code>@init</code> section defines the <code>control</code> function. This function corresponds to the computation happening just before the audio loop in the C++ backend. These correspond to the computations related to controls and MIDI. </p>
<p>In JSFX sandboxed context, we don't need to call it on every loop, thus it has been pushed outside of <code>@block</code>. Moreover, this computation must be accessible from both <code>@slider</code> and <code>@block</code>. The current implementation will trigger a call to <code>control</code> function everytime a slider value changes, or everytime a MIDI input event happens. </p>
<p>By default, the <code>@block</code> section is empty. It will be filled with code if MIDI is somehow enabled:</p>
<ul>
<li>by associating MIDI input to a control in slider metadata <code>[keyon:64]</code></li>
<li>by setting polyphonic mode with <code>declare options ["nvoices:4"]</code> </li>
</ul>
<p>The former will actually connect MIDI key or ctrl to the slider, while the latter will connect MIDI note inputs to sliders named <em>freq</em>, <em>key</em>, <em>vel</em>, <em>gain</em>, <em>gate</em>, and will convert the MIDI value to whatever it is supposed to represent: frequency for <em>freq</em>, raw MIDI note number for "key" (...).  </p>
<p>The <code>@block</code> section contains a condition so that it will only call the <code>control</code> function when MIDI events occur. </p>
<p>The ̀<code>@slider</code> section only calls <code>control</code>, and is itself only computed when a slider value changes.</p>
<p>Finally, the <code>@sample</code> section is where the magic happens. It will loop through the different objects and compute the audio output. This section is represented in JSFX as a block of code called for every single sample. At the bottom of generated code, object outputs are summed in JSFX special variables <code>spl0</code>, <code>spl1</code> (...), which are the actual outputs of a JSFX plugin.</p>
<h3 id="midi-basic-example">MIDI basic example</h3>
<p>Basic MIDI inputs can be retrieved with controls (Faust sliders) if specific metadata are added to the control name.
The available MIDI inputs are: </p>
<ul>
<li>keyon</li>
<li>keyoff</li>
<li>key (both keyon and keyoff)</li>
<li>ctrl</li>
</ul>
<p>See <a href="../../manual/midi/">MIDI</a> for more information about MIDI metadata syntax.</p>
<!-- faust-run -->
<div class="faust-run"><img src="exfaust1/exfaust1.svg" class="mx-auto d-block">
<faust-editor><!--

declare options "[midi:on]";
import("stdfaust.lib");

vel = hslider("vel[midi:ctrl 10]", 0, 0, 127, 1);
freq = hslider("freq[midi:ctrl 11]", 50, 50, 1000, 0.1);

process = os.osc(freq) * 0.1 * (vel / 127);

--></faust-editor>
<br>
</div>
<!-- /faust-run -->

<p>The generated code will contain a <code>@block</code> section that connects MIDI CC input (for CC 10 and 11) to relevant control values. </p>
<pre><code class="language-jsfx">@block
midi_event = 0;
while (midirecv(mpos, msg1, msg2, msg3)) (
        status = msg1&amp;0xF0;
        channel = msg1&amp;0x0F;
        (status == CC) ? (
                midi_event += 1;
                (msg2 == 0xa) ? (fHslider1 = midi_scale(msg3, 0.0000000000000000, 127.0000000000000000, 1.0000000000000000));
                (msg2 == 0xb) ? (fHslider0 = midi_scale(msg3, 50.0000000000000000, 1000.0000000000000000, 0.1000000000000000));
        );
);
(midi_event &gt; 0) ? (control());
</code></pre>
<h3 id="midi-polyphonic-example">MIDI polyphonic example</h3>
<p>As explained in the <a href="../../manual/midi/">MIDI</a> documentation, Faust supports MIDI polyphonic audio plugins. These plugins respond to MIDI note inputs with three different data: </p>
<ul>
<li>key or frequency</li>
<li>velocity or gain</li>
<li>a gate used to trigger an envelope </li>
</ul>
<p>Be careful that <em>key</em> will be a value between 0-127 while frequency will be converted to cycle per seconds. Same mechanism applies to velocity (0-127) versus gain (0-1). 
The following code shows the basic mechanism of the MIDI polyphonic instrument that compiles for JSFX. </p>
<!-- faust-run -->
<div class="faust-run"><img src="exfaust2/exfaust2.svg" class="mx-auto d-block">
<faust-editor><!--

declare options "[midi:on][nvoices:4]";
import("stdfaust.lib");

freq = hslider("freq", 0, 0, 10000, 0.1) : si.smoo;
gain = hslider("gain", 0, 0, 1, 0.01) : si.smoo;
gate = checkbox("gate");
env = gate : en.asr(0.1, 0.5, 0.5);

process = os.osc(freq) * env * gain * 0.1;

--></faust-editor>
<br>
</div>
<!-- /faust-run -->

<p>In this JSFX backend, polyphonic voices use a voice stealing mechanism, allowing a new voice to steal the oldest one if no voice is free. </p>
<p>The generated code contains a filled <code>@block</code> section that is used to look for MIDI input notes <code>midirecv</code>, thus performing expected actions: </p>
<ul>
<li>a NOTE ON message looks for an available voice (or steals the oldest one if necessary) and sets its controls</li>
<li>a NOTE OFF message looks for the voice that is playing its key to turn its gate off. </li>
</ul>
<pre><code>@block
midi_event = 0;
while (midirecv(mpos, msg1, msg2, msg3)) (
        status = msg1&amp;0xF0;
        channel = msg1&amp;0x0F;
        (status == NOTE_ON) ? (
                midi_event += 1;
                voice_idx = get_oldest_voice();
                sort_voices(voice_idx);
                obj = get_dsp(voice_idx);
                obj[dsp.key_id] = msg2;
                obj[dsp.gate] = 1;
                obj[dsp.fCheckbox0] = 1;
                obj[dsp.fHslider1] = midi_scale(msg3, 0.0000000000000000, 1.0000000000000000, 0.0100000000000000);
                obj[dsp.fHslider0] = limit(mtof(msg2), 0.0000000000000000, 10000.0000000000000000);
        ); // NOTE ON condition off
        (status == NOTE_OFF) ? (
                midi_event += 1;
                voice_idx = 0;
                while(voice_idx &lt; nvoices) (
                        obj = get_dsp(voice_idx);
                        (obj[dsp.key_id] == msg2 &amp;&amp; obj[dsp.gate] &gt; 0) ? (
                                obj[dsp.gate] = 0;
                                obj[dsp.fCheckbox0] = 0;
                                voice_idx = nvoices;
                        );
                        voice_idx += 1;
                ); // end of while
        ); // end of condition
);
(midi_event &gt; 0) ? (control());
</code></pre>
<h2 id="using-the-faust-web-ide">Using the Faust Web IDE</h2>
<h3 id="generating-a-jsfx-file">Generating a JSFX file</h3>
<p>The JSFX backend is available on the <a href="https://faustide.grame.fr/">Faust web IDE</a>. In order to export a Faust program as JSFX code, you will need to click on the "export/compile to specific target" button (on the left side, below "Save as"). Then, you need to  choose <strong><em>jsfx</em></strong> both as the platform and architecture, and click <strong><em>compile</em></strong>.<br />
This will allow your to download a <code>binary.zip</code> file, containing the resulting <strong><em>jsfx</em></strong> file and your original <strong><em>dsp</em></strong> file. </p>
<h3 id="generating-a-jsfx-file-in-polyphonic-mode">Generating a JSFX file in polyphonic mode</h3>
<p>The <code>declare options "[midi:on][nvoices:n]";</code> <a href="../../manual/midi/#configuring-and-activating-polyphony">coding convention</a> can be used in the DSP code to activate MIDI and polyphonic mode.</p>
<h2 id="limitations">Limitations</h2>
<p>As JSFX is a sandboxed environment, this backend cannot match the full Faust potential. Some features are missing, some others might come in the future. </p>
<p>First, only three controls are available: </p>
<ul>
<li>sliders: hslider, vslider, nentry</li>
<li>button</li>
<li>checkbox</li>
</ul>
<p>All of these are mapped to sliders in JSFX. </p>
<p>On the MIDI side, this backend does not support program changes, neither channel press, or pitchweel. As described before, the available MIDI is key, keyon, keyoff, ctrl and polyphonic mode. </p></div>
        </div>
    </div>

    <footer class="col-md-12">
        <hr>
        <p>Copyright &copy; 2020-2025 <a href="https://www.grame.fr">Grame-CNCM</a></p>
    </footer>
    <script>
        var base_url = "../..",
        shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
    </script>
    <script src="../../js/base.js" defer></script>
    <script src="/js/faust-web-component.js" defer></script>
    <script src="../../search/main.js" defer></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
